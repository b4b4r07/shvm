#!/bin/sh
set -e

uninstall() {
  if ! [ -d "$SHVM_HOME/usr/bash-${bash_version}" ]; then
    echo "bash-${bash_version} : already gone"
    return 1
  fi

  echo "bash-${bash_version} : removing.."
  rm -rf "$SHVM_HOME/usr/bash-${bash_version}"
}

help() {
  echo "Usage: shvm uninstall <version>"
}

bash_version=

while test $# != 0; do
  case "$1" in
  --help)
    help
    exit 0
    ;;
  -*|--*)
    echo >&2 "Unrecognized option: $1"
    exit 1
    ;;
  *)
    bash_version="${1#bash-}"
    ;;
  esac
  shift
done

if [ -z "$bash_version" ]; then
  help
  exit 1
fi

uninstall
